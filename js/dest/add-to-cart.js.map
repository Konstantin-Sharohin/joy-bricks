{"version":3,"sources":["../src/add-to-cart.js"],"names":["window","joyBricks","addToCart","cart_array","JSON","parse","localStorage","getItem","header_cart_icon","document","querySelector","counter","dataset","parseInt","catalog_container","all_cart_icons","querySelectorAll","all_items","addEventListener","action","console","log","i","all_items_length","length","cart_array_length","j","title","quantity","event","selectedIconClass","target","className","current_item_container","parentNode","current_item","getAttribute","textContent","has_title","push","setItem","stringify"],"mappings":"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","sourcesContent":["(function (window) {\r\n\r\n    const joyBricks = window.joyBricks || {};\r\n\r\n    joyBricks.addToCart = function () {\r\n            let cart_array = JSON.parse(window.localStorage.getItem(\"filled_cart\")) || [],\r\n                header_cart_icon = document.querySelector(\".cart-icon span\"),\r\n                counter = header_cart_icon.dataset.counter = parseInt(window.localStorage.getItem(\"cart_counter\")) || 0,\r\n                catalog_container = document.querySelector(\".catalog-container\"),\r\n                all_cart_icons = document.querySelectorAll(\".add-cart-symbol .fas.fa-cart-arrow-down\"),\r\n                all_items = document.querySelectorAll(\".catalog-item a\");\r\n\r\n            if (document.addEventListener) {\r\n                catalog_container.addEventListener(\"click\", action);\r\n            } else console.log(\"Method 'addEventListener' cannot be applied\");\r\n\r\n            //setting quantity in data attribute for each item\r\n            let i = 0,\r\n                all_items_length = all_items.length,\r\n                cart_array_length = cart_array.length;\r\n            if (cart_array && cart_array.length != 0) {\r\n                for (i; i < all_items_length; i++) {\r\n                    let j = 0;\r\n                    for (j; j < cart_array_length; j++) {\r\n                        if (all_items[i].title == cart_array[j].title) {\r\n                            all_cart_icons[i].dataset.quantity = cart_array[j].quantity;\r\n                        };\r\n                    };\r\n                };\r\n            };\r\n\r\n            //creating item object & setting properties in the markup\r\n            function action(event) {\r\n                let selectedIconClass = event.target.className,\r\n                    cart_array = JSON.parse(window.localStorage.getItem(\"filled_cart\")) || [],\r\n                    target = event.target,\r\n                    current_item_container = target.parentNode.parentNode.parentNode;\r\n\r\n                if (selectedIconClass == \"fas fa-cart-arrow-down\") {\r\n                    current_item = {\r\n                        \"title\": current_item_container.querySelector('a').getAttribute('title'),\r\n                        \"photo\": current_item_container.querySelector('img').getAttribute('src'),\r\n                        \"price\": current_item_container.querySelector('.item-price').textContent,\r\n                        \"code\": current_item_container.querySelector('.item-code').textContent,\r\n                        \"quantity\": 0\r\n                    };\r\n\r\n                    //setting initial item quantity\r\n                    let has_title = false,\r\n                        i = 0,\r\n                        cart_array_length = cart_array.length;\r\n\r\n                    if (cart_array && cart_array_length > 0) {\r\n                        for (i; i < cart_array_length; i++) {\r\n                            if (current_item.title == cart_array[i].title) {\r\n                                has_title = true;\r\n                                current_item.quantity = cart_array[i].quantity;\r\n                            };\r\n                        };\r\n                    };\r\n\r\n                    if (has_title == false) {\r\n                        current_item.quantity++;\r\n                        target.dataset.quantity = current_item.quantity;\r\n                        counter++;\r\n                        header_cart_icon.dataset.counter = counter;\r\n\r\n                        cart_array.push(current_item);\r\n                        window.localStorage.setItem(\"filled_cart\", JSON.stringify(cart_array));\r\n                        window.localStorage.setItem(\"cart_counter\", counter);\r\n                    };\r\n                };\r\n            };\r\n        };\r\n\r\n    joyBricks.addToCart();\r\n\r\n    window.joyBricks = joyBricks;\r\n\r\n})(window);\r\n"],"file":"add-to-cart.js"}