{"version":3,"sources":["../../src/cart-page-functionality.js"],"names":["cart_array","JSON","parse","window","localStorage","getItem","length","show_empty_cart","cart_page_inner_container","classList","add","setTimeout","remove","note","document","createElement","style","textAlign","innerHTML","cart_page_container","appendChild","calculate_rows","params","row_nodeList","items_container","querySelectorAll","total_price","row_nodeList_length","i","row_item_price","parseInt","querySelector","textContent","row_quantity","row_total_price","create_item_object","current_item","current_button_container","getAttribute","current_item_quantity","update_save","counter","total_quantity","item_index","findIndex","title","splice","setItem","stringify","action","event","selectedButtonClass","target","className","parentNode","current_item_initial_price","addEventListener","console","log"],"mappings":"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","sourcesContent":["(function () {\r\n    const cart_array = JSON.parse(window.localStorage.getItem(\"filled_cart\"));\r\n\r\n//if the Cart Array exists and is not empty - get counter and reference to html-elements\r\n    if (cart_array && cart_array.length != 0) {\r\n        const cart_page_container = document.querySelector(\".cart-page-container\"),\r\n            cart_page_inner_container = document.querySelector(\".cart-page-inner-container\"),\r\n            items_container = document.querySelector(\".table\");\r\n\r\n        if (document.addEventListener) {\r\n            items_container.addEventListener(\"click\", action);\r\n        } else console.log(\"Method 'addEventListener' cannot be applied\");\r\n\r\n//declaring functions for \"empty cart\", \"row calculation\", \"order item object\" and \"update_save\" (in order to avoid repetitions below)\r\n            function show_empty_cart() {\r\n            cart_page_inner_container.classList.add(\"deletion-animation\");\r\n            setTimeout(() => cart_page_inner_container.remove(), 1000);\r\n            const note = document.createElement(\"p\");\r\n            note.style.textAlign = \"center\";\r\n            note.innerHTML = \"<i>Ваша корзина пуста...</i>\";\r\n            cart_page_container.appendChild(note);\r\n        };\r\n\r\n\r\n        function  calculate_rows(params) {\r\n            const row_nodeList = items_container.querySelectorAll(\".row.items\");\r\n            if (row_nodeList.length == 0) {\r\n                params.total_price =  0;\r\n                return params.total_price;\r\n            }\r\n\r\n        let row_nodeList_length = row_nodeList.length,\r\n            i = 0,\r\n            total_price = 0;\r\n            for (i; i < row_nodeList_length; i++) {\r\n               let row_item_price = parseInt(row_nodeList[i].querySelector(\".item-price\").textContent),\r\n                row_quantity = parseInt(row_nodeList[i].querySelector(\".item-quantity\").textContent),\r\n                row_total_price = row_item_price * row_quantity;\r\n                total_price += row_total_price;\r\n            }\r\n            params.total_price = total_price;\r\n        };\r\n\r\n\r\n        function create_item_object(params) {\r\n            const current_item = {\r\n                \"title\": params.current_button_container.querySelector('.cell:first-child').getAttribute('title'),\r\n                \"photo\": params.current_button_container.querySelector('.cart-page-item-img').getAttribute('src'),\r\n                \"price\": params.current_button_container.querySelector('.cart-page-item-price').textContent,\r\n                \"code\": params.current_button_container.querySelector('.cart-page-item-code').textContent,\r\n                \"quantity\": params.current_item_quantity\r\n                };\r\n            params.current_item = current_item;\r\n        };\r\n\r\n\r\n        function update_save(params) {\r\n            create_item_object(params);\r\n            calculate_rows(params);\r\n            items_container.querySelector(\".row.total-row div:last-child\").textContent = params.total_price + ' грн';\r\n            let counter = params.total_quantity;\r\n\r\n        let item_index = cart_array.findIndex(i => i.title == params.current_item.title);\r\n            cart_array.splice(item_index, 1, params.current_item);\r\n\r\n            window.localStorage.setItem(\"filled_cart\", JSON.stringify(cart_array));\r\n            window.localStorage.setItem(\"cart_counter\", counter);\r\n            window.localStorage.setItem(\"cart_total_price\", params.total_price);\r\n        };\r\n\r\n\r\n//One of the two main event handlers on \"click\" event\r\n        function action(event) {\r\n            let counter = parseInt(window.localStorage.getItem(\"cart_counter\")),\r\n                selectedButtonClass = event.target.className,\r\n                target = event.target;\r\n            let current_button_container;\r\n\r\n                if (selectedButtonClass == \"fas fa-trash-alt\") {\r\n                    current_button_container = target.parentNode.parentNode.parentNode.parentNode;\r\n                } else if (selectedButtonClass == \"item-delete\" || selectedButtonClass == \"item-add\" || selectedButtonClass == \"item-substract\") {\r\n                    current_button_container = target.parentNode.parentNode.parentNode;\r\n                } else if (selectedButtonClass == \"cart-submit-btn\") {\r\n                    return;\r\n                }\r\n\r\n            //getting initial price and quantity of the selected item\r\n            const current_item_quantity = parseInt(current_button_container.querySelector(\".item-quantity\").textContent),\r\n                current_item_initial_price = parseInt(current_button_container.querySelector(\".item-price\").textContent),\r\n\r\n            //saving the references above to the object\r\n                params = {\r\n                    \"current_button_container\": current_button_container,\r\n                    \"current_item_quantity\": current_item_quantity,\r\n                    \"current_item_initial_price\": current_item_initial_price,\r\n                    \"total_quantity\": counter,\r\n                    \"total_price\": 0\r\n                };\r\n\r\n            //defining actions for 'add' button\r\n                if (selectedButtonClass == \"item-add\") {\r\n                    params.current_item_quantity++;\r\n                    params.current_button_container.querySelector(\".item-quantity\").textContent = params.current_item_quantity;\r\n                    params.total_quantity++;\r\n                    update_save(params);\r\n\r\n            //defining actions for 'substract' button\r\n                } else if (selectedButtonClass == \"item-substract\" && current_item_quantity > 1) {\r\n                    params.current_item_quantity--;\r\n                    params.current_button_container.querySelector(\".item-quantity\").textContent = params.current_item_quantity;\r\n                    params.total_quantity--;\r\n                    update_save(params);\r\n\r\n            //defining actions for 'delete' button\r\n                } else if (selectedButtonClass == \"fas fa-trash-alt\" || selectedButtonClass == \"item-delete\") {\r\n                    params.total_quantity -= params.current_item_quantity;\r\n                    create_item_object(params);\r\n\r\n                    params.current_button_container.classList.add(\"deletion-animation\");\r\n                    //setTimeout(() => current_button_container.remove(), 1000);\r\n                    current_button_container.remove();\r\n\r\n                    calculate_rows(params);\r\n\r\n                let item_index = cart_array.findIndex(i => i.title == params.current_item.title);\r\n                    cart_array.splice(item_index, 1);\r\n\r\n                    items_container.querySelector(\".row.total-row div:last-child\").textContent = params.total_price + ' грн';\r\n\r\n                    if (cart_array.length == 0) {\r\n                        show_empty_cart();\r\n                    }\r\n\r\n                    counter = params.total_quantity;\r\n\r\n                    window.localStorage.setItem(\"filled_cart\", JSON.stringify(cart_array));\r\n                    window.localStorage.setItem(\"cart_counter\", counter);\r\n                    window.localStorage.setItem(\"cart_total_price\", params.total_price);\r\n                }\r\n            };\r\n    }\r\n}());\r\n"],"file":"cart-page-functionality.js"}