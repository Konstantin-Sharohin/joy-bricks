{"version":3,"sources":["../../src/order-sender.js"],"names":["cart_array","JSON","parse","window","localStorage","getItem","cart_total_price","form","document","querySelector","result","addEventListener","sendRequest","console","log","formData","FormData","append","stringify","request","XMLHttpRequest","open","onreadystatechange","readyState","status","clear","innerHTML","responseText","setTimeout","location","replace","send"],"mappings":";;AAAC,aAAY;AACT,MAAMA,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,aAA5B,CAAX,CAAnB;AAAA,MACAC,gBAAgB,GAAGH,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,kBAA5B,CADnB;AAAA,MAGAE,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAHP;AAAA,MAIAC,MAAM,GAAGF,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,CAJT;;AAMA,MAAID,QAAQ,CAACG,gBAAb,EAA+B;AAC3BH,IAAAA,QAAQ,CAACC,aAAT,CAAuB,uBAAvB,EAAgDE,gBAAhD,CAAiE,OAAjE,EAA0EC,WAA1E;AACH,GAFD,MAEOC,OAAO,CAACC,GAAR,CAAY,6CAAZ;;AAEP,WAASF,WAAT,GAAuB;AACnB,QAAMG,QAAQ,GAAG,IAAIC,QAAJ,CAAaT,IAAb,CAAjB;AACAQ,IAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBhB,IAAI,CAACiB,SAAL,CAAelB,UAAf,CAAzB;AACAe,IAAAA,QAAQ,CAACE,MAAT,CAAgB,kBAAhB,EAAoChB,IAAI,CAACiB,SAAL,CAAeZ,gBAAf,CAApC;AAEA,QAAMa,OAAO,GAAG,IAAIC,cAAJ,EAAhB;AAEAD,IAAAA,OAAO,CAACE,IAAR,CAAa,MAAb,EAAqB,mBAArB;;AAEAF,IAAAA,OAAO,CAACG,kBAAR,GAA6B,YAAY;AACrC,UAAIH,OAAO,CAACI,UAAR,IAAsB,CAAtB,IAA2BJ,OAAO,CAACK,MAAR,IAAkB,GAAjD,EAAsD;AAClDrB,QAAAA,MAAM,CAACC,YAAP,CAAoBqB,KAApB;AACAf,QAAAA,MAAM,CAACgB,SAAP,GAAmBP,OAAO,CAACQ,YAA3B;AACAC,QAAAA,UAAU,CAAC;AAAA,iBAAMpB,QAAQ,CAACqB,QAAT,CAAkBC,OAAlB,CAA0B,uCAA1B,CAAN;AAAA,SAAD,EAA2E,IAA3E,CAAV;AACH;AACJ,KAND;;AAQAX,IAAAA,OAAO,CAACY,IAAR,CAAahB,QAAb;AACH;AAEJ,CA/BA,GAAD","sourcesContent":["(function () {\r\n    const cart_array = JSON.parse(window.localStorage.getItem(\"filled_cart\")),\r\n    cart_total_price = window.localStorage.getItem(\"cart_total_price\"),\r\n\r\n    form = document.querySelector(\".order-form\"),\r\n    result = document.querySelector(\".order-submit-container\");\r\n\r\n    if (document.addEventListener) {\r\n        document.querySelector(\".cart-submit-btn.send\").addEventListener(\"click\", sendRequest);\r\n    } else console.log(\"Method 'addEventListener' cannot be applied\");\r\n\r\n    function sendRequest() {\r\n        const formData = new FormData(form);\r\n        formData.append(\"order\", JSON.stringify(cart_array));\r\n        formData.append(\"cart_total_price\", JSON.stringify(cart_total_price));\r\n\r\n        const request = new XMLHttpRequest();\r\n\r\n        request.open(\"POST\", \"order-handler.php\");\r\n\r\n        request.onreadystatechange = function () {\r\n            if (request.readyState == 4 && request.status == 200) {\r\n                window.localStorage.clear();\r\n                result.innerHTML = request.responseText;\r\n                setTimeout(() => document.location.replace(\"http://localhost/joy-bricks/index.php\"), 5000);\r\n            }\r\n        };\r\n\r\n        request.send(formData);\r\n    }\r\n\r\n}());"],"file":"order-sender.js"}